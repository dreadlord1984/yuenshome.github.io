[![header](../../../assets/header20.jpg)](https://yuenshome.github.io)

# vim常用命令（不断补充中）

## 删除命令

- 删除当前行：dd  
- 删除当前以上行：dgg  
- 删除当前以下行：dGG  

## 文本替换

转载自：vim文本替换命令 - 折翼的飞鸟 - 博客园
http://www.cnblogs.com/wind-wang/p/5768000.html

<h1>1. 字符串替换</h1>
<h2>1.1 替换当前行中的内容：`:s/from/to/`</h2>
s是switch的意思，即替换
<ul>
	<li>`:s/from/to/`：将当前行中的第一个from，替换成to。如果当前行含有多个 from，则只会替换其中的第一个。</li>
	<li>`:s/from/to/g`：将当前行中的所有from都替换成to。</li>
	<li>`:s/from/to/gc`： 将当前行中的所有from都替换成to，但是每一次替换之前都会询问请求用户确认此操作。</li>
</ul>
<!--more-->

<span style="color: #ff0000;">注意：这里的from和to都可以是任何字符串，其中from还可以是<strong>正则表达式</strong>。</span>
<h2>1.2 替换某一行的内容： `:33s/from/to/g`</h2>
<ul>
	<li>`:.s/from/to/g`：在当前行进行替换操作。</li>
	<li>`:33s/from/to/g`：在第33行进行替换操作。</li>
	<li>`:$s/from/to/g`：在最后一行进行替换操作。</li>
</ul>
<h2>1.3 替换某些行的内容： `:10,20s/from/to/g`</h2>
<ul>
	<li>`:10,20s/from/to/g`：对第10行到第20行的内容进行替换。</li>
	<li>`:1,$s/from/to/g`：对第一行到最后一行的内容进行替换（即全部文本）。</li>
	<li>`:1,.s/from/to/g`：对第一行到当前行的内容进行替换。</li>
	<li>`:.,$s/from/to/g`：对当前行到最后一行的内容进行替换。</li>
	<li>`:'a,'bs/from/to/g`：对标记a和b之间的行（含a和b所在的行）进行替换。其中a和b是之前用m命令所做的标记。</li>
</ul>
<h2>1.4 替换所有行的内容： `:%s/from/to/g`</h2>
<ul>
	<li>`:%s/from/to/g`：对所有行的内容进行替换。</li>
	<li>`:g/^\s*$/d`：删除空行，其中g为全区命令，/为分隔符，^\s*$用来匹配空行，其中^表示行首，\s表示空字符，包括空格和制表符，*重复0到n个前面的字符，$表示行尾。连起来就是匹配只有空字符的行，也就是空行。/d表示删除该行。</li>
</ul>
<h2>1.5 替换命令的完整形式： `:[range]s/from/to/[flags]`</h2>
<h3>1.5.1 `s/from/to/`</h3>
把from指定的字符串替换成to指定的字符串，from可以是正则表达式。
<h3>1.5.2 `[range]`</h3>
有以下一些表示方法：不写range ： 默认为光标所在的行。
<ul>
	<li>. ： 光标所在的行。</li>
	<li>1 ： 第一行。</li>
	<li>$ ： 最后一行。</li>
	<li>33 ： 第33行。</li>
	<li>'a ： 标记a所在的行（之前要使用ma做过标记）。</li>
	<li>.+1 ： 当前光标所在行的下面一行。</li>
	<li>$-1 ： 倒数第二行。（这里说明我们可以对某一行加减某个数值来取得相对的行）。</li>
	<li>22,33 ： 第22～33行。</li>
	<li>1,$ ： 第1行 到 最后一行。</li>
	<li>1,. ： 第1行 到 当前行。</li>
	<li>.,$ ： 当前行 到 最后一行。</li>
	<li>'a,'b ： 标记a所在的行 到 标记b所在的行。</li>
	<li>% ： 所有行（与 1,$ 等价）。</li>
	<li>?chapter? ： 从当前位置向上搜索，找到的第一个chapter所在的行。（其中chapter可以是任何字符串或者正则表达式）。</li>
	<li>/chapter/ ： 从当前位置向下搜索，找到的第一个chapter所在的行。（其中chapter可以是任何字符串或者正则表达式）。</li>
</ul>
注意，上面的所有用于range的表示方法都可以通过 +、- 操作来设置相对偏移量。
<h3>1.5.3 `[flags]`</h3>
这里可用的flags有：
<ul>
	<li>无：只对指定范围内的第一个匹配项进行替换。</li>
	<li>g：对指定范围内的所有匹配项进行替换。</li>
	<li>c：在替换前请求用户确认。</li>
	<li>e：忽略执行过程中的错误。</li>
</ul>
注意：上面的所有flags都可以组合起来使用，比如 gc 表示对指定范围内的所有匹配项进行替换，并且在每一次替换之前都会请用户确认。
<h1>2. 统计字符串出现次数</h1>
多按几次ESC键，进入普通模式。输入:（英文半角的冒号）进入命令模式。假设要统计的字符为"test"，再输入%s/test/&amp;/gn后回车。此时就能看到屏幕下方显示的数字。
